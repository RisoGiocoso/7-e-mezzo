<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>7 e Mezzo ‚Äì Home</title>
<style>
body { 
    margin:0; 
    height:100vh; 
    background: radial-gradient(circle,#1f6b45,#062a1a); 
    font-family:Arial,sans-serif; 
    color:white; 
    display:flex; 
    align-items:center; 
    justify-content:center; 
}
.panel { 
    background:rgba(0,0,0,0.4); 
    padding:30px; 
    border-radius:20px; 
    width:400px; 
    text-align:center; 
}
h1 { margin-top:0; }
input { 
    width:100%; 
    padding:12px; 
    border-radius:20px; 
    border:none; 
    margin-bottom:10px; 
    font-size:16px; 
}
button { 
    width:100%; 
    padding:12px 0; 
    border-radius:25px; 
    border:none; 
    font-weight:bold; 
    cursor:pointer; 
    margin-bottom:10px; 
}
.create { background: gold; }
.join { background: #1f3cff; color:white; }
hr { border:1px solid #fff; margin:20px 0; }
.session-list { text-align:left; margin-top:15px; }
.session-item { 
    padding:12px; 
    background: rgba(255,255,255,0.1); 
    border-radius:10px; 
    margin-bottom:10px; 
}
.session-item .btn { 
    font-size: 14px; 
    padding: 6px 12px; 
}
.session-item .badge { font-size: 12px; }
</style>
</head>
<body>
<div class="panel">
<h1>üé¥ 7 e Mezzo</h1>

<form method="post" action="/create_game">
    <input 
        name="username" 
        placeholder="Il tuo nome" 
        required
    >
    <button 
        class="create" 
        type="submit"
    >
        Crea nuova sessione
    </button>
</form>

<hr>

<h3>Sessioni disponibili</h3>

<div class="session-list">
    {% if games %}
        {% for game_id, game in games.items() %}
            <div class="session-item">
                ID: <strong>{{ game_id }}</strong><br>
                Giocatori: {{ game.players.keys()|join(', ') }}
                <small>({{ game.players|length }} giocatore{{ 'e' if game.players|length == 1 else 'i' }})</small>
                <br>
                Mazziere: <strong>{{ game.turn_order[0] }}</strong>
                <br>
                {% if game.started %}
                    <span class="badge bg-success">Partita in corso</span>
                {% else %}
                    <span class="badge bg-warning text-dark">In attesa di giocatori</span>
                {% endif %}
                
                <!-- Bottone Elimina sessione SEMPRE visibile -->
                <form 
                    action="/delete_game/{{ game_id }}/{{ game.turn_order[0] }}" 
                    method="post" 
                    style="margin-top:12px; display:inline;"
                >
                    <button 
                        type="submit" 
                        class="btn btn-danger btn-sm"
                        onclick="return confirm('Sei sicuro di voler ELIMINARE definitivamente questa sessione?\nTutti i giocatori verranno espulsi dalla partita.');"
                    >
                        üóëÔ∏è Elimina sessione
                    </button>
                </form>
            </div>
        {% endfor %}
    {% else %}
        <p class="text-muted">Nessuna sessione attiva al momento.</p>
    {% endif %}
</div>

<hr>

<form method="post" action="/join">
    <input 
        name="game_id" 
        placeholder="ID sessione esistente" 
        required
    >
    <input 
        name="username" 
        placeholder="Il tuo nome" 
        required
    >
    <button 
        class="join" 
        type="submit"
    >
        Unisciti alla sessione
    </button>
</form>

</div>
</body>
</html>
